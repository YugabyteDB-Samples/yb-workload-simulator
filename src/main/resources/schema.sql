CREATE EXTENSION IF NOT EXISTS pgcrypto;
-- Table DL_FILING
CREATE TABLE IF NOT EXISTS DL_FILING (
    FILING_ID BIGINT,
    FILER_ID TEXT,
    H_FILER_ID TEXT,
    SENDER_ID TEXT,
    AUTH_ID TEXT,
    ACCOUNT_NUMBER TEXT,
    DATE_OF_BIRTH TEXT,
    SPOUSE_FILER_ID TEXT,
    H_SPOUSE_FILER_ID TEXT,
    SPOUSE_DATE_OF_BIRTH TEXT,
    REFERENCE_NUMBER TEXT,
    AGI TEXT,
    LINKED_FED_SUBMISSION_ID TEXT,
    LAST_DML TIMESTAMP DEFAULT NOW(),
    ERO_CLIENT_ID TEXT,
    SENDER_EMAIL TEXT,
    LEGAL_NAME TEXT,
    CRED_ID TEXT,
    CLIENT_IP_ADDR TEXT,
    LAST_NAME TEXT,
    PHONE_NO TEXT,
    ADDRESS TEXT,
    SPOUSE_LAST_NAME TEXT,
    FIRST_NAME TEXT,
    MACHINE_ID TEXT,
    COMPANY_NAME TEXT,
    SMS_NUMBER TEXT,
    SPOUSE_FULL_NAME TEXT,
    CLIENT_APP TEXT,
    LAST_UPDATER TEXT,
    PRIMARY KEY (FILING_ID)
    )
;

-- Table FILING
CREATE TABLE IF NOT EXISTS  FILING (
    FILING_ID BIGINT,
    efileinfo jsonb,
    CLIENT_FILING_ID TEXT,
    AGENCY TEXT,
    FILING_TYPE TEXT,
    FILER_ID TEXT,
    SENDER_ID TEXT,
    CLIENT_APP TEXT,
    CLIENT_VERSION TEXT,
    SENDER_EMAIL TEXT,
    LEGAL_NAME TEXT,
    CRED_ID TEXT,
    PIN TEXT,
    PASSWORD TEXT,
    FILING_STATE INT,
    REPOS_STATE INT,
    RX_CLIENT_DATE TIMESTAMP DEFAULT NOW(),
    NOTIFICATION_DATE TIMESTAMP DEFAULT NOW(),
    OVERRIDE_DUPLICATE INT,
    WANTS_NOTIFICATION INT,
    PERIOD TEXT,
    FORMSET_VERSION TEXT,
    FORMSET_ENGINE_VERSION TEXT,
    LINKED_FILING_ID BIGINT,
    STATUS_DATE TIMESTAMP DEFAULT NOW(),
    SUBMISSION_TYPE TEXT,
    SETTLEMENT_DATE TIMESTAMP DEFAULT NOW(),
    PAYMENT_AMOUNT INT,
    ROUTING_NUMBER TEXT,
    ACCOUNT_NUMBER TEXT,
    DCN TEXT,
    POSTMARK_DATE TIMESTAMP DEFAULT NOW(),
    CLIENT_IP_ADDR TEXT,
    FORMSET_VERSION_CONVERTER TEXT,
    TRACKING_NUMBER TEXT,
    PRODUCT_CODE TEXT,
    CUST_TIMEZONE TEXT,
    AUTH_CODE TEXT,
    LAST_NAME TEXT,
    DATE_OF_BIRTH TIMESTAMP DEFAULT NOW(),
    PHONE_NO TEXT,
    ZIP_CODE TEXT,
    ADDRESS TEXT,
    SPOUSE_FILER_ID TEXT,
    SPOUSE_LAST_NAME TEXT,
    SPOUSE_DATE_OF_BIRTH TIMESTAMP DEFAULT NOW(),
    HIDE_STATUS INT,
    REFERENCE_NUMBER TEXT,
    FORMSET TEXT,
    PLAN_NUMBER TEXT,
    SITE_ID INT,
    CLIENT_SUBMISSION_ID BIGINT,
    PAYMENT_METHOD TEXT,
    POST_ACK_ENUM TEXT,
    AGI TEXT,
    PAYLOAD_FORMAT TEXT,
    TAXPAYER_FILING_STATUS TEXT,
    INCOMING_CLASS_ID TEXT,
    FIRST_NAME TEXT,
    MACHINE_ID TEXT,
    PRIMARY_NAME_CONTROL TEXT,
    COMPANY_NAME TEXT,
    SMS_NUMBER TEXT,
    SMS_OPT_IN_FLAG INT,
    SPOUSE_NAME_CONTROL TEXT,
    OVERRIDE_LINKED INT,
    SPOUSE_FULL_NAME TEXT,
    LINKED_FED_SUBMISSION_ID TEXT,
    FUNDING_DATE TIMESTAMP DEFAULT NOW(),
    FUNDING_STATUS INT,
    LINK_IF_POSSIBLE TEXT,
    FILED_AS_STATE_ONLY INT,
    LINKED_FED_FILING_TYPE TEXT,
    ERO_INFO_ID BIGINT,
    ERO_CLIENT_ID TEXT,
    LAST_DML TIMESTAMP DEFAULT NOW(),
    FILER_ID_LAST_DIGITS TEXT,
    SPOUSE_FILER_ID_LAST_DIGITS TEXT,
    ORIGINATING_BUS_UNIT INT,
    SECURE_DOB TEXT,
    SECURE_SPOUSE_DOB TEXT,
    SECURE_AGI TEXT,
    COUNTRY_CODE TEXT,
    FILER_AUTH_ID TEXT,
    FILER_TYPE INT,
    LAST_UPDATER TEXT,
    DMS_KEY INT,
    PRIMARY KEY (FILING_ID)
    )
;

CREATE TABLE IF NOT EXISTS ROUTING_NUMBER (
    ROUTING_NUMBER BIGINT,
    BANK_NAME TEXT,
    LAST_DML TIMESTAMP DEFAULT NOW(),
    LAST_UPDATER TEXT,
    PRIMARY KEY (ROUTING_NUMBER)
)
;

CREATE TABLE IF NOT EXISTS TRANSMISSION (
      SUBMISSION_ID BIGINT,
      CORRELATION_ID TEXT,
      SERVICE_ID TEXT,
      TRANSMISSION_DATE TIMESTAMP DEFAULT NOW(),
      STATUS_CHECK_DATE TIMESTAMP DEFAULT NOW(),
      SYSTEM_ID TEXT,
      LAST_DML TIMESTAMP DEFAULT NOW(),
      LAST_UPDATER TEXT,
      PRIMARY KEY(SUBMISSION_ID)
)
;

CREATE TABLE IF NOT EXISTS TRANSMISSION_FILING(
        SUBMISSION_ID BIGINT,
        CORRELATION_ID TEXT,
        FILING_STATE INT,
        REFERENCE_NUMBER TEXT,
        FILING_ID BIGINT,
        TRANSMISSION_ID BIGINT,
        LAST_DML TIMESTAMP DEFAULT NOW(),
        LAST_UPDATER TEXT,
        PRIMARY KEY(SUBMISSION_ID)
    )
;

CREATE TABLE IF NOT EXISTS TRANSMIT_DATA_VALUE(
    SUBMISSION_ID BIGINT,
    TRANSMIT_DATA_VALUE_ID BIGINT,
    NAME TEXT,
    ENC_VALUE TEXT,
    VALUE TEXT,
    INSERT_TIME TIMESTAMP DEFAULT NOW(),
    LAST_DML TIMESTAMP DEFAULT NOW(),
    DL_ENC_VALUE TEXT,
    LAST_UPDATER TEXT,
    PRIMARY KEY(SUBMISSION_ID)
)
;


